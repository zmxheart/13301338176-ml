<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Diploma Thesis : Inlining Assistance for large-scale object-oriented applications | Blog blog("Baptiste Wicht");</title>
<script src="/cdn-cgi/apps/head/98vpnawSZZMscPn4oDND-ZgswjM.js"></script><link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2011/10/diploma-thesis-inlining-assistance-for-large-scale-object-oriented-applications.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="../09/book-review-more-effective-c.html" title="Book Review : More Effective C++" type="text/html">
<link rel="next" href="install-git-flow-linux.html" title="How to install git-flow on Linux" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="Diploma Thesis : Inlining Assistance for large-scale object-oriented a">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2011/10/diploma-thesis-inlining-assistance-for-large-scale-object-oriented-applications.html">
<meta property="og:description" content="One month ago, my diploma thesis has been accepted and I got my Bachelor of Science in Computer Science.
I made my diploma thesis at Lawrence Berkeley National Laboratory, Berkeley, California. I was ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2011-10-03T08:44:17+02:00">
<meta property="article:tag" content="Boost">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="Compilers">
<meta property="article:tag" content="gcc">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Optimization">
<meta property="article:tag" content="Performances">
<meta property="article:tag" content="Personal">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="publisher" href="https://plus.google.com/+BaptisteWicht">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2175227-7', 'auto');
  var metas = document.getElementsByTagName('meta'), tagsList = [];
  for (var i=0; i<metas.length; i++) {
    if (metas[i].getAttribute('property') == 'article:tag') {
      tagsList.push( metas[i].getAttribute('content'));
    }
  }
  ga('set', 'dimension1', tagsList.join('|'));
  ga('send', 'pageview');
</script>
</head>
<body>

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
<div class="container-fluid">

<div class="row">
<div class="col-sm-3 col-lg-2">
<nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="http://baptiste-wicht.com/">
<span id="blog-title">Blog blog("Baptiste Wicht");</span>
</a>
</div>

<div class="collapse navbar-collapse navbar-ex1-collapse">
<ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
</li>
<li>
<a href="../../../stories/publications.html">Publications</a>
</li>
<li>
<a href="../../../stories/projects.html">Projects</a>
</li>
<li>
<a href="../../../categories/index.html">Tags</a>
</li>
<li>
<a href="../../../archive.html">Archives</a>
</li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>
</li>
<li class="navbar-content">
<h3>Related posts</h3>
</li>
<li><a href="../../2012/07/eddi-compiler-1-0-3-inlining-register-allocation.html">EDDI Compiler 1.0.3 - Inlining and register allocation</a></li>
<li><a href="../../2012/09/back-in-berkeley-california.html">Back in Berkeley, California</a></li>
<li><a href="../../2014/04/install-use-clang-static-analyzer-cmake.html">Install and Use CLang Static Analyzer on a CMake project</a></li>
<li><a href="../../2012/11/eddic-compiles-with-clang-3-1.html">eddic compiles with CLang 3.1</a></li>
<li><a href="../../2012/11/eddic-compiler-1-1-4-graph-coloring-register-allocation.html">EDDI Compiler 1.1.4 – Graph Coloring Register Allocation</a></li>
<li><a href="../09/profile-c-application-with-callgrind-kcachegrind.html">How to profile C++ application with Callgrind / KCacheGrind</a></li>
<li class="navbar-block">
<li class="wicht-navbar-right">
<a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
<img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
</li>
<li class="wicht-navbar-right">
<a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
<img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
</li>
</ul>
</div>

</nav>
</div> 
<div class="col-sm-9 col-lg-10">
<div id="content"></div>
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Diploma Thesis : Inlining Assistance for large-scale object-oriented applications</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">
Baptiste Wicht
</span></p>
<p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2011-10-03T08:44:17+02:00" itemprop="datePublished" title="2011-10-03 08:44">2011-10-03 08:44</time></a></p>
<p class="commentline">
<a href="diploma-thesis-inlining-assistance-for-large-scale-object-oriented-applications.html#disqus_thread" data-disqus-identifier="cache/posts/2011/10/diploma-thesis-inlining-assistance-for-large-scale-object-oriented-applications.html">Comments</a>
</p>
<p class="sourceline"><a href="diploma-thesis-inlining-assistance-for-large-scale-object-oriented-applications.wp" class="sourcelink">Source</a></p>
</div>
</header><div class="e-content entry-content" itemprop="articleBody text">
<div>
<p>One month ago, my diploma thesis has been accepted and I got my Bachelor of Science in Computer Science.</p>
<p>I made my diploma thesis at Lawrence Berkeley National Laboratory, Berkeley, California. I was in the team responsible of the developmenet of the ATLAS Software for the LHC in Cern. The title of my thesis is <strong>Inlining Assistance for large-scale object-oriented applications</strong></p>
<p>The goal of this project was to create a C++ analyzer to find the best functions and call sites to inline. The input of the analyzer is a call graph generated by CallGrind of the Valgrind project.</p>
<p>The functions and call sites to inline are computed using a heuristic, called the temperature. This heuristic is based on the cost of calling the given function, the frequency of calls and the size of the function. The cost of calling a function is based on the number of parameters, the virtuality of the function and the shared object the function is located in.</p>
<p>The analyzer is also able to find clusters of call sites. A cluster is a set of hot call sites related to each other. It can also finds the functions that should be moved from one library to the other or the function that should not be virtual by testing the use of each function in a class hierarchy.</p>
<p>To achieve this project, it has been necessary to study in details how a function is called on the Linux platform. The inlining optimization has also been studied to know what were the advantages and the problems of this technique.</p>
<p>To retrieve the information about the sizes and the virtuality of the function, it has been necessary to read the shared libraries and executables files. For that, we used <em>libelf</em>. The virtuality of a function is calculated by reading each virtual table and searching for the function in the virtual tables content.</p>
<p>The graph manipulation is made by the <em>Boost Graph Library</em>. As it was an advanced library, it has helped me improving my skills in specific topics like templates, traits or Template Metaprogramming.</p>
<p>The analyzer is able to run on the Linux platform on any program that has been compiled using gcc.</p>

<p>We have tested the analyzer on the CLang compiler and have been able to obtain these results :</p>
<p><a href="../../../wp-content/uploads/2011/09/Results.png"><img alt="Results on CLang" src="../../../wp-content/uploads/2011/09/Results-300x203.png" title="Results on CLang"></a></p>
<p>Cluster 1 and 2 indicates that we have inlined the first, respectively the second, cluster. Callsites_5 indicates that the first five call sites have been inlined and Functions_3 indicates that we inlined the first three functions. As we can see, the results are not really impressive, but we have only done inlining. Moreover, in some large applications, even little savings are really interesting. For example, in the ATLAS software, 1% of saving represents 100K$/year.</p>
<p>Here is the base outline of my work:</p>
<ol>
<li><strong>Introduction</strong></li>
<li>
<strong>Analysis</strong> : Function Call, Inlining, Compiler Inlining</li>
<li>
<strong>Information Extraction</strong> : Graph manipulation, parsing object files</li>
<li>
<strong>Information analysis</strong> : Heuristc, library issues, clustering, virtual hierarchy issues</li>
<li><strong>Design</strong></li>
<li>
<strong>Tests</strong> : Tests on CLang, Tests on ATLAS</li>
<li>
<strong>Performance analysis</strong> : Performance of the analyzer</li>
<li><strong>Refactorings</strong></li>
<li><strong>Problems</strong></li>
<li>
<strong>Tools</strong> : Application used during the project</li>
<li><strong>Conclusion</strong></li>
</ol>
<p>You can download a PDF version of my thesis here : <strong><a href="../../../wp-content/uploads/2011/09/report.pdf">Inlining Assistance for large-scale object-oriented applications</a></strong></p>
</div>
</div>
<aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/boost.html" rel="tag">Boost</a></li>
<li><a class="tag p-category" href="../../../categories/c%2B%2B.html" rel="tag">C++</a></li>
<li><a class="tag p-category" href="../../../categories/compilers.html" rel="tag">Compilers</a></li>
<li><a class="tag p-category" href="../../../categories/gcc.html" rel="tag">gcc</a></li>
<li><a class="tag p-category" href="../../../categories/linux.html" rel="tag">Linux</a></li>
<li><a class="tag p-category" href="../../../categories/optimization.html" rel="tag">Optimization</a></li>
<li><a class="tag p-category" href="../../../categories/performances.html" rel="tag">Performances</a></li>
<li><a class="tag p-category" href="../../../categories/personal.html" rel="tag">Personal</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous">
<a href="../09/book-review-more-effective-c.html" rel="prev" title="Book Review : More Effective C++">Previous post</a>
</li>
<li class="next">
<a href="install-git-flow-linux.html" rel="next" title="How to install git-flow on Linux">Next post</a>
</li>
</ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
<div id="disqus_thread"></div>
<script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2011/10/diploma-thesis-inlining-assistance-for-large-scale-object-oriented-applications.html",
        disqus_title="Diploma Thesis : Inlining Assistance for large-scale object-oriented applications",
        disqus_identifier="cache/posts/2011/10/diploma-thesis-inlining-assistance-for-large-scale-object-oriented-applications.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
<a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
</section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> 
</div>

</div>



<footer>
Contents © 2017 <a href="/cdn-cgi/l/email-protection#dbb9baabafb2a8afbeacb2b8b3af9bbcb6bab2b7f5b8b4b6">Baptiste Wicht</a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> - License:
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
<ul class="footer_inline_ul">
<li>
<a href="diploma-thesis-inlining-assistance-for-large-scale-object-oriented-applications.wp" id="sourcelink">Source</a>
</li>
</ul></footer><script src="/cdn-cgi/scripts/78d64697/cloudflare-static/email-decode.min.js"></script><script src="../../../assets/js/all-nocdn.js"></script>
</body>
</html>
