<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>A Mutt journey: Search mails with notmuch | Blog blog("Baptiste Wicht");</title>
<script src="/cdn-cgi/apps/head/98vpnawSZZMscPn4oDND-ZgswjM.js"></script><link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="../07/catch-powerful-yet-simple-cpp-test-framework.html" title="Catch: A powerful yet simple C++ test framework" type="text/html">
<link rel="next" href="../09/short-introduction-to-deep-learning.html" title="Short introduction to deep learning" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="A Mutt journey: Search mails with notmuch">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html">
<meta property="og:description" content="In the previous installment in the Mutt series, I've talked about my Mutt
configuration.
In this post, I'll talk about notmuch and how to use it to search through mails.
By default, you can search mai">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2014-08-02T17:24:12+02:00">
<meta property="article:tag" content="Gentoo">
<meta property="article:tag" content="Gmail">
<meta property="article:tag" content="Linux">
<meta property="article:tag" content="Mutt">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="publisher" href="https://plus.google.com/+BaptisteWicht">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2175227-7', 'auto');
  var metas = document.getElementsByTagName('meta'), tagsList = [];
  for (var i=0; i<metas.length; i++) {
    if (metas[i].getAttribute('property') == 'article:tag') {
      tagsList.push( metas[i].getAttribute('content'));
    }
  }
  ga('set', 'dimension1', tagsList.join('|'));
  ga('send', 'pageview');
</script>
</head>
<body>

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
<div class="container-fluid">

<div class="row">
<div class="col-sm-3 col-lg-2">
<nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="http://baptiste-wicht.com/">
<span id="blog-title">Blog blog("Baptiste Wicht");</span>
</a>
</div>

<div class="collapse navbar-collapse navbar-ex1-collapse">
<ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
</li>
<li>
<a href="../../../stories/publications.html">Publications</a>
</li>
<li>
<a href="../../../stories/projects.html">Projects</a>
</li>
<li>
<a href="../../../categories/index.html">Tags</a>
</li>
<li>
<a href="../../../archive.html">Archives</a>
</li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>
</li>
<li class="navbar-content">
<h3>Related posts</h3>
</li>
<li><a href="../07/a-mutt-journey-filter-mails-with-imapfilter.html">A Mutt Journey: Filter mails with imapfilter</a></li>
<li><a href="../07/a-mutt-journey-download-mails-with-offlineimap.html">A Mutt Journey: Download mails with offlineimap</a></li>
<li><a href="../07/a-mutt-journey-my-mutt-configuration.html">A Mutt journey: Mutt configuration</a></li>
<li><a href="../../2010/04/drag-and-drop-files-to-gmail.html">Drag and drop files to Gmail</a></li>
<li><a href="../07/catch-powerful-yet-simple-cpp-test-framework.html">Catch: A powerful yet simple C++ test framework</a></li>
<li><a href="../../2013/07/why-how-left-windows-for-linux.html">Why and how I completely left Windows for Linux</a></li>
<li class="navbar-block">
<li class="wicht-navbar-right">
<a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
<img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
</li>
<li class="wicht-navbar-right">
<a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
<img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
</li>
</ul>
</div>

</nav>
</div> 
<div class="col-sm-9 col-lg-10">
<div id="content"></div>
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">A Mutt journey: Search mails with notmuch</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">
Baptiste Wicht
</span></p>
<p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2014-08-02T17:24:12+02:00" itemprop="datePublished" title="2014-08-02 17:24">2014-08-02 17:24</time></a></p>
<p class="commentline">
<a href="a-mutt-journey-search-mails-with-notmuch.html#disqus_thread" data-disqus-identifier="cache/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html">Comments</a>
</p>
<p class="sourceline"><a href="a-mutt-journey-search-mails-with-notmuch.rst" class="sourcelink">Source</a></p>
</div>
</header><div class="e-content entry-content" itemprop="articleBody text">
<div>
<p>In the previous installment in the Mutt series, <a class="reference external" href="http://baptiste-wicht.com/posts/2014/07/a-mutt-journey-my-mutt-configuration.html">I've talked about my Mutt
configuration</a>.
In this post, I'll talk about notmuch and how to use it to search through mails.</p>
<p>By default, you can search mails in Mutt by using the / key. By doing that, you
can only search in the current folder. This is very fast, but this is not always
what you want. When you don't know in which folder the mail you are looking for
is, you don't want to test each folder. By default, there are no feature to
achieve global searching in Mutt.</p>
<p>That is where notmuch comes to the rescue. notmuch is a very simple tool that
allows you to search through your mail. As its name indicates, it does not do
much. It doesn't download your mails, you have to have them locally, which is
perfect <a class="reference external" href="http://baptiste-wicht.com/posts/2014/07/a-mutt-journey-download-mails-with-offlineimap.html">if you use offlineimap</a>.
It does not provide a user interface, but you can query it from the command line
and it can be used from other tools. It should be available in most of the
distributions.</p>
<div class="section" id="configuration">
<h2>Configuration</h2>
<p>The configuration of notmuch is fairly simple. You can write your
<code>.notmuch-config</code> directly or run <code>notmuch setup</code> that will
interactively help you to fill the configuration.</p>
<p>Here is my configuration:</p>
<pre class="code text"><a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-1"></a>[database]
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-2"></a>path=/data/oi/Gmail/
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-3"></a>
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-4"></a>[user]
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-5"></a>name=Baptiste Wicht
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-6"></a><a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="205052494d4152597f454d41494c1d42415054495354450e574943485460474d41494c0e434f4d">[email&#160;protected]</a>
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-7"></a>
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-8"></a>[new]
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-9"></a>tags=inbox
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-10"></a>ignore=
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-11"></a>
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-12"></a>[search]
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-13"></a>exclude_tags=deleted;
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-14"></a>
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-15"></a>[maildir]
<a name="rest_code_469cd4dff3474f6589b6d981b1836d2c-16"></a>synchronize_flags=true
</pre>
<p>It needs of cours the place where your mails are stored. Then, some information
about you. The next section is to specify which tags you want to add to new
mails. Here, I specified that each new mail must be tagged with <cite>inbox</cite>. You can
add several tags to new mails. In the <cite>[search]</cite> section, the excluded tags are
specified.</p>
</div>
<div class="section" id="usage">
<h2>Usage</h2>
<p>Once you have configured notmuch, you can run <cite>notmuch new</cite> to process all
existing mails. The first run may take some time (in minutes, it is still quite
fast), but the subsequent runs will be very fast. You should run notmuch after
each offlineimap run. I personally run it in a shell script that is run by cron.
You could also use one of the hooks of offlineimap to run notmuch.</p>
<p>Once indexing has been done, you can start searching your mails. The first
option to search mail is simply to use <cite>notmuch search &lt;query&gt;</cite> from the command
line. This will directly displays the results. Search is instant on my mails.</p>
<p>If you use mutt-kz like me, notmuch support is directly integrated. You can type
X, and then type your query like <code>notmuch://?query=X</code> and the results will
be displayed as a normal Mutt folder. You can open mails directly from here and
you can also edit the mails as if you were in their source folders. This is
really practical.</p>
<p>If you use mutt, you can have the same experience, by using the <cite>notmuch-mutt</cite>
patch (<cite>here &lt;http://notmuchmail.org/notmuch-mutt/&gt;</cite>). In several distributions,
there is an option to build it with this support or another package to add the
feature.</p>
<p>Another feature of notmuch is its ability to tag mails. It automatically tags
new mails and deleted mails. But you can also explicitely tag messages by using
<code>notmuch tag</code>. For instance, to tag all messages from the notmuch mailing
list:</p>
<pre class="code text"><a name="rest_code_fe270caf40654f459b84fa88c9553028-1"></a>notmuch tag +notmuch -- tag:new and to:<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="9ef0f1eaf3ebfdf6def0f1eaf3ebfdf6f3fff7f2b0f1ecf9">[email&#160;protected]</a>
</pre>
<p>I personally don't use this feature since I use imapfilter and IMAP folders to
sort my mail, but it can be very useful. You can run these commands in the
cronjob and always have you tags up to date. Tags can then be used in notmuch to
search or to create virtual folder in Mutt.</p>
</div>
<div class="section" id="conclusion">
<h2>Conclusion</h2>
<p>That is already more or less everything that there is to know about notmuch. It
does not do a lot of thing, but it does them really well.</p>
<p>That concludes the series of posts on Mutt. If you have any question on my Mutt
configuration, I'd be glad to extend on the comments.</p>
</div>
</div>
</div>
<aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/gentoo.html" rel="tag">Gentoo</a></li>
<li><a class="tag p-category" href="../../../categories/gmail.html" rel="tag">Gmail</a></li>
<li><a class="tag p-category" href="../../../categories/linux.html" rel="tag">Linux</a></li>
<li><a class="tag p-category" href="../../../categories/mutt.html" rel="tag">Mutt</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous">
<a href="../07/catch-powerful-yet-simple-cpp-test-framework.html" rel="prev" title="Catch: A powerful yet simple C++ test framework">Previous post</a>
</li>
<li class="next">
<a href="../09/short-introduction-to-deep-learning.html" rel="next" title="Short introduction to deep learning">Next post</a>
</li>
</ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
<div id="disqus_thread"></div>
<script src="/cdn-cgi/scripts/78d64697/cloudflare-static/email-decode.min.js"></script><script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html",
        disqus_title="A Mutt journey: Search mails with notmuch",
        disqus_identifier="cache/posts/2014/08/a-mutt-journey-search-mails-with-notmuch.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
<a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
</section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> 
</div>

</div>



<footer>
Contents Â© 2017 <a href="/cdn-cgi/l/email-protection#c8aaa9b8bca1bbbcadbfa1aba0bc88afa5a9a1a4e6aba7a5">Baptiste Wicht</a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> - License:
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
<ul class="footer_inline_ul">
<li>
<a href="a-mutt-journey-search-mails-with-notmuch.rst" id="sourcelink">Source</a>
</li>
</ul></footer><script src="/cdn-cgi/scripts/78d64697/cloudflare-static/email-decode.min.js"></script><script src="../../../assets/js/all-nocdn.js"></script>
</body>
</html>
