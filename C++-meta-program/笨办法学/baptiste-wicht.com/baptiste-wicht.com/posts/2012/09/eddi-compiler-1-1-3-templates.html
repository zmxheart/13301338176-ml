<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>EDDI Compiler 1.1.3 - Templates | Blog blog("Baptiste Wicht");</title>
<script src="/cdn-cgi/apps/head/98vpnawSZZMscPn4oDND-ZgswjM.js"></script><link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2012/09/eddi-compiler-1-1-3-templates.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="../08/jelastic-java-host-recommended-james-gosling.html" title="Jelastic Java Host - Recommended by James Gosling !" type="text/html">
<link rel="next" href="back-in-berkeley-california.html" title="Back in Berkeley, California" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="EDDI Compiler 1.1.3 - Templates">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2012/09/eddi-compiler-1-1-3-templates.html">
<meta property="og:description" content="I finished the version 1.1.3 of the EDDI Compiler (eddic).
The main improvement to the language is the support of templates. The syntax is more or less the same as the syntax of C++ templates, but the">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2012-09-05T07:25:42+02:00">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="Compilers">
<meta property="article:tag" content="EDDI">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="publisher" href="https://plus.google.com/+BaptisteWicht">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2175227-7', 'auto');
  var metas = document.getElementsByTagName('meta'), tagsList = [];
  for (var i=0; i<metas.length; i++) {
    if (metas[i].getAttribute('property') == 'article:tag') {
      tagsList.push( metas[i].getAttribute('content'));
    }
  }
  ga('set', 'dimension1', tagsList.join('|'));
  ga('send', 'pageview');
</script>
</head>
<body>

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
<div class="container-fluid">

<div class="row">
<div class="col-sm-3 col-lg-2">
<nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="http://baptiste-wicht.com/">
<span id="blog-title">Blog blog("Baptiste Wicht");</span>
</a>
</div>

<div class="collapse navbar-collapse navbar-ex1-collapse">
<ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
</li>
<li>
<a href="../../../stories/publications.html">Publications</a>
</li>
<li>
<a href="../../../stories/projects.html">Projects</a>
</li>
<li>
<a href="../../../categories/index.html">Tags</a>
</li>
<li>
<a href="../../../archive.html">Archives</a>
</li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>
</li>
<li class="navbar-content">
<h3>Related posts</h3>
</li>
<li><a href="../07/eddi-compiler-1-1-0-member-functions.html">EDDI Compiler 1.1.0 - Member functions</a></li>
<li><a href="../08/eddi-compiler-1-1-2-read-command-line.html">EDDI Compiler 1.1.2 – Read command line</a></li>
<li><a href="../06/eddi-compiler-1-0-1-pointers-better-struct-support.html">EDDI Compiler 1.0.1 - Pointers and better struct support</a></li>
<li><a href="../11/eddic-compiler-1-1-4-graph-coloring-register-allocation.html">EDDI Compiler 1.1.4 – Graph Coloring Register Allocation</a></li>
<li><a href="../../2011/11/eddi-compiler-0-6-0-arrays.html">EDDI Compiler 0.6.0 : Arrays</a></li>
<li><a href="../07/eddi-compiler-1-0-2-better-pointer-support-new-optimizations.html">EDDI Compiler 1.0.2 – Better pointer support and Dead-Code Elimination</a></li>
<li class="navbar-block">
<li class="wicht-navbar-right">
<a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
<img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
</li>
<li class="wicht-navbar-right">
<a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
<img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
</li>
</ul>
</div>

</nav>
</div> 
<div class="col-sm-9 col-lg-10">
<div id="content"></div>
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">EDDI Compiler 1.1.3 - Templates</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">
Baptiste Wicht
</span></p>
<p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2012-09-05T07:25:42+02:00" itemprop="datePublished" title="2012-09-05 07:25">2012-09-05 07:25</time></a></p>
<p class="commentline">
<a href="eddi-compiler-1-1-3-templates.html#disqus_thread" data-disqus-identifier="cache/posts/2012/09/eddi-compiler-1-1-3-templates.html">Comments</a>
</p>
<p class="sourceline"><a href="eddi-compiler-1-1-3-templates.wp" class="sourcelink">Source</a></p>
</div>
</header><div class="e-content entry-content" itemprop="articleBody text">
<div>
<p>I finished the <strong>version 1.1.3 of the EDDI Compiler (eddic)</strong>.</p>
<p>The main improvement to the language is the support of templates. The syntax is more or less the same as the syntax of C++ templates, but the features are much more limited. In EDDI, you can declare class templates and function templates. Class templates can also includes member function templates.</p>
<p>Here is an example of the use of templates in EDDI:</p>
<pre class="code literal-block"><span></span><span class="k">template</span><span class="o">&lt;</span><span class="n">type</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">node</span> <span class="p">{</span>
    <span class="n">T</span> <span class="n">value</span><span class="p">;</span>

    <span class="k">this</span><span class="p">(</span><span class="n">T</span> <span class="n">init</span><span class="p">){</span>
        <span class="n">print</span><span class="p">(</span><span class="s">"C1|"</span><span class="p">);</span>
        <span class="k">this</span><span class="p">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">init</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">T</span> <span class="n">get_value</span><span class="p">(){</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">value</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">template</span><span class="o">&lt;</span><span class="n">type</span> <span class="n">U</span><span class="o">&gt;</span>
    <span class="kt">void</span> <span class="n">print_value</span><span class="p">(</span><span class="n">U</span> <span class="n">v</span><span class="p">){</span>
        <span class="n">print</span><span class="p">(</span><span class="n">v</span><span class="p">);</span>
        <span class="n">print</span><span class="p">(</span><span class="s">"|"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="n">type</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">debug</span><span class="p">(</span><span class="n">T</span> <span class="n">t</span><span class="p">){</span>
    <span class="n">print</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
    <span class="n">print</span><span class="p">(</span><span class="s">"|"</span><span class="p">);</span>
<span class="p">}</span>

<span class="k">template</span><span class="o">&lt;</span><span class="n">type</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="kt">void</span> <span class="n">test</span><span class="p">(</span><span class="n">node</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;*</span> <span class="n">node</span><span class="p">){</span>
    <span class="n">debug</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">value</span><span class="p">);</span>
    <span class="n">debug</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">get_value</span><span class="p">());</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">main</span><span class="p">(){</span>
    <span class="n">node</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">first_node</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
    <span class="n">node</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">second_node</span><span class="p">(</span><span class="mf">13.3</span><span class="p">);</span>

    <span class="n">test</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">first_node</span><span class="p">);</span>
    <span class="n">test</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">second_node</span><span class="p">);</span>

    <span class="n">first_node</span><span class="p">.</span><span class="n">print_value</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="mf">1.0</span><span class="p">);</span>
    <span class="n">second_node</span><span class="p">.</span><span class="n">print_value</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>
</pre>
<p>This new feature adds generic programming capabilities to the language.</p>
<p>This version also adds other language improvements. The first one is the support of the ! operator for a bool, to test if a bool is false. This version also includes support for iterating through all the chars of a string with a foreach loop. And finally, the this pointer is now implicit to access member fields of a struct from member functions.</p>
<p>The optimization engine has been greatly improved. The pointers are much better handled and some regression due to new features have been fixed. The Constant Propagation optimization can take default values of struct and arrays into account. Finally, the functions with char parameters can now be inlined.</p>
<p>Finally, the compiler use a new logging system, that can be completely removed at compile-time for release versions.</p>
<h4>Future Work</h4>
<p>The next version of the EDDI compiler (eddic) will be the version 1.1.4. This version will add support for some basic pointer manipulation. It will also add support for dynamically allocated arrays. Finally, the version will includes several new optimization techniques regarding to loops: Loop Invariant Code Motion, Loop Strength Reduction and perhaps some basic Loop Unrolling.</p>
<h4>Download</h4>
<p>You can find the EDDI Compiler sources on the Github repository: <a title="Github repository of eddic" href="https://github.com/wichtounet/eddic">https://github.com/wichtounet/eddic</a></p>
<p>The exact version I refer to is the v1.1.3 available in the GitHub tags or directly as the release branch.</p>
</div>
</div>
<aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/c%2B%2B.html" rel="tag">C++</a></li>
<li><a class="tag p-category" href="../../../categories/compilers.html" rel="tag">Compilers</a></li>
<li><a class="tag p-category" href="../../../categories/eddi.html" rel="tag">EDDI</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous">
<a href="../08/jelastic-java-host-recommended-james-gosling.html" rel="prev" title="Jelastic Java Host - Recommended by James Gosling !">Previous post</a>
</li>
<li class="next">
<a href="back-in-berkeley-california.html" rel="next" title="Back in Berkeley, California">Next post</a>
</li>
</ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
<div id="disqus_thread"></div>
<script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2012/09/eddi-compiler-1-1-3-templates.html",
        disqus_title="EDDI Compiler 1.1.3 - Templates",
        disqus_identifier="cache/posts/2012/09/eddi-compiler-1-1-3-templates.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
<a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
</section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> 
</div>

</div>



<footer>
Contents © 2017 <a href="/cdn-cgi/l/email-protection#187a79686c716b6c7d6f717b706c587f75797174367b7775">Baptiste Wicht</a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> - License:
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
<ul class="footer_inline_ul">
<li>
<a href="eddi-compiler-1-1-3-templates.wp" id="sourcelink">Source</a>
</li>
</ul></footer><script src="/cdn-cgi/scripts/78d64697/cloudflare-static/email-decode.min.js"></script><script src="../../../assets/js/all-nocdn.js"></script>
</body>
</html>
