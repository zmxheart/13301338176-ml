<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Play Framework - The template engine | Blog blog("Baptiste Wicht");</title>
<script src="/cdn-cgi/apps/head/98vpnawSZZMscPn4oDND-ZgswjM.js"></script><link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2010/07/play-framework-template-engine.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="osgi-hello-world-services.html" title="OSGi - Simple Hello World with services" type="text/html">
<link rel="next" href="tip-profile-osgi-application-visualvm.html" title="Tip : Profile an OSGi application with VisualVM" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="Play Framework - The template engine">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2010/07/play-framework-template-engine.html">
<meta property="og:description" content="In the previous post about Play Framework, we seen how to install Play and create a first simple application. In this post, we'll see how to customize the views and use the template engine of the fram">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2010-07-19T06:55:51+02:00">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Play!">
<meta property="article:tag" content="Web">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="publisher" href="https://plus.google.com/+BaptisteWicht">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2175227-7', 'auto');
  var metas = document.getElementsByTagName('meta'), tagsList = [];
  for (var i=0; i<metas.length; i++) {
    if (metas[i].getAttribute('property') == 'article:tag') {
      tagsList.push( metas[i].getAttribute('content'));
    }
  }
  ga('set', 'dimension1', tagsList.join('|'));
  ga('send', 'pageview');
</script>
</head>
<body>

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
<div class="container-fluid">

<div class="row">
<div class="col-sm-3 col-lg-2">
<nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="http://baptiste-wicht.com/">
<span id="blog-title">Blog blog("Baptiste Wicht");</span>
</a>
</div>

<div class="collapse navbar-collapse navbar-ex1-collapse">
<ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
</li>
<li>
<a href="../../../stories/publications.html">Publications</a>
</li>
<li>
<a href="../../../stories/projects.html">Projects</a>
</li>
<li>
<a href="../../../categories/index.html">Tags</a>
</li>
<li>
<a href="../../../archive.html">Archives</a>
</li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>
</li>
<li class="navbar-content">
<h3>Related posts</h3>
</li>
<li><a href="getting-started-play-framework.html">Getting started with Play Framework</a></li>
<li><a href="integrate-play-framework-intellij-idea.html">Tip : Integrate Play Framework in IntelliJ Idea</a></li>
<li><a href="../../2011/11/cpp-templates-complete-guide-book.html">C++ Templates : The Complete Guide - Book Review</a></li>
<li><a href="../04/links-of-the-week-3.html">Links of the week (April 20)</a></li>
<li><a href="../../2015/03/named-optional-template-parameters-compile-time.html">Named Optional Template parameters to configure a class at compile-time</a></li>
<li><a href="../../2017/08/simplify-your-type-traits-with-c++14-variable-templates.html">Simplify your type traits with C++14 variable templates</a></li>
<li class="navbar-block">
<li class="wicht-navbar-right">
<a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
<img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
</li>
<li class="wicht-navbar-right">
<a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
<img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
</li>
</ul>
</div>

</nav>
</div> 
<div class="col-sm-9 col-lg-10">
<div id="content"></div>
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Play Framework - The template engine</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">
Baptiste Wicht
</span></p>
<p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2010-07-19T06:55:51+02:00" itemprop="datePublished" title="2010-07-19 06:55">2010-07-19 06:55</time></a></p>
<p class="commentline">
<a href="play-framework-template-engine.html#disqus_thread" data-disqus-identifier="cache/posts/2010/07/play-framework-template-engine.html">Comments</a>
</p>
<p class="sourceline"><a href="play-framework-template-engine.wp" class="sourcelink">Source</a></p>
</div>
</header><div class="e-content entry-content" itemprop="articleBody text">
<div>
<p>In the previous post about <strong>Play Framework</strong>, we seen <a title="Getting started with Play Framework" href="http://www.baptiste-wicht.com/2010/07/getting-started-play-framework/" target="_blank">how to install Play and create a first simple application</a>. In this post, we'll see how to customize the views and use the template engine of the framework to easily create web pages.</p>
<p>Play has its own template engine to generate HTML web pages. The template engine use Groovy as expression language. You will use Groovy language to create all the dynamic parts of the web pages. But there is no need to learn completely Grooxy, it's really close to Java and if you know already knows Java, there is no problem to use Groovy in your templates. All the templates are located in the app/views folder in your application. All the dynamic part of the web page is resolved during the execution of the template and the result is a part of the HTTP Response.</p>

<p>So first of all, we'll create a little application for our needs :</p>
<pre>wich<a href="/cdn-cgi/l/email-protection" class="__cf_email__" data-cfemail="f2869d879c9786b2859b919a869d879c9786df9e9382869d82">[email&#160;protected]</a>:~/dev/play$ /usr/share/play/play new views

~        _            _ 
~  _ __ | | __ _ _  _| |
~ | '_ \| |/ _' | || |_|
~ |  __/|_|\____|\__ (_)
~ |_|            |__/   

~ play! 1.0.3, http://www.playframework.org
~ The new application will be created in /home/wichtounet/dev/play/views
~ What is the application name? Views
~ OK, the application is created.
~ Start it with : play run views
~ Have fun!
~</pre>
<p>So we start to inspect what has been created by Play. If you go in app/views, you will see this structure :</p>
<ul>
<li>Application : This folder is to store the templates of the Application controller</li>
<li>errors : This folder contains the templates for the HTTP Error pages (404, 500, ...)</li>
<li>main.html : This is the main template</li>
</ul>
<p>If you open Application/index.html, you obtain this kind of code :</p>
<pre class="code literal-block"><span></span>#{extends 'main.html' /}
#{set title:'Home' /}
#{welcome /}
</pre>
<p>The first line indicate that we extend an other template (main.html). The next line use a Play tag (set), to set the title of the page. A set tag has a brother, the get tag who get the value setted by the set tag. The last line use the welcome tag who print the content of the welcome page. </p>
<p>Now, let's see the main.html template : </p>
<pre class="code literal-block"><span></span><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="p">&lt;</span><span class="nt">html</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">head</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;</span>#{get 'title' /}<span class="p">&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">http-equiv</span><span class="o">=</span><span class="s">"Content-Type"</span> <span class="na">content</span><span class="o">=</span><span class="s">"text/html; charset=utf-8"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"stylesheet"</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/css"</span> <span class="na">media</span><span class="o">=</span><span class="s">"screen"</span> <span class="na">href</span><span class="o">=</span><span class="s">"@{'/public/stylesheets/main.css'}"</span><span class="p">&gt;</span>
        #{get 'moreStyles' /}
        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">"shortcut icon"</span> <span class="na">type</span><span class="o">=</span><span class="s">"image/png"</span> <span class="na">href</span><span class="o">=</span><span class="s">"@{'/public/images/favicon.png'}"</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">script</span> <span class="na">src</span><span class="o">=</span><span class="s">"@{'/public/javascripts/jquery-1.4.2.min.js'}"</span> <span class="na">type</span><span class="o">=</span><span class="s">"text/javascript"</span> <span class="na">charset</span><span class="o">=</span><span class="s">"utf-8"</span><span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
        #{get 'moreScripts' /}
    <span class="p">&lt;/</span><span class="nt">head</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
        #{doLayout /}
    <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
<span class="p">&lt;/</span><span class="nt">html</span><span class="p">&gt;</span>
</pre>
<p>There is some interesting things here : </p>
<ul>
<li>#{get 'title' /} : return the value of the variable title (not a Java variable, only a HTML variable)</li>
<li>@{'/public/stylesheets/main.css'} : resolve the resource to its URL</li>
<li>#{doLayout /} : Indicate where the sub templates (template who extends main.html) will be rendered</li>
</ul>
<h4>Pass variables to the view</h4>
<p>So let's go further. The first important thing is to know how to pass variables to the view from the controller. With Play Framework, this is really simple. just add the variables you need to the render() method of the controller. By example, to pass a String to the view : </p>
<pre class="code literal-block"><span></span><span class="kn">package</span> <span class="nn">controllers</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">play.mvc.*</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Application</span> <span class="kd">extends</span> <span class="n">Controller</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">index</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">String</span> <span class="n">hello</span> <span class="o">=</span> <span class="s">"Hello World from Controller !"</span><span class="o">;</span>

        <span class="n">render</span><span class="o">(</span><span class="n">hello</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>
<p>The variable hello is now accessible from the view on the name "hello". To get it, you have to use ${variable_name} simply to display it : </p>
<pre class="code literal-block"><span></span>#{extends 'main.html' /}
#{set title:'Home' /}
Hello from the view
<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
${hello}
</pre>
<p>Easy, no ? </p>
<p>Let's try adding a simple class to our model : </p>
<pre class="code literal-block"><span></span><span class="kn">package</span> <span class="nn">models</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Book</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">title</span><span class="o">;</span>

    <span class="kd">public</span> <span class="nf">Book</span><span class="o">(</span><span class="n">String</span> <span class="n">title</span><span class="o">)</span> <span class="o">{</span>
        <span class="kd">super</span><span class="o">();</span>

        <span class="k">this</span><span class="o">.</span><span class="na">title</span> <span class="o">=</span> <span class="n">title</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">getTitle</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">title</span><span class="o">;</span>
    <span class="o">}</span>
</pre>
<p>And pass it to the view : </p>
<pre class="code literal-block"><span></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">index</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">Book</span> <span class="n">book</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">"Hello Play !"</span><span class="o">);</span>

        <span class="n">render</span><span class="o">(</span><span class="n">book</span><span class="o">);</span>
    <span class="o">}</span>
</pre>
<p>And then get it from the view : </p>
<pre class="code literal-block"><span></span>#{extends 'main.html' /}
#{set title:'Home' /}
Hello from the view
<span class="p">&lt;</span><span class="nt">br</span> <span class="p">/&gt;</span>
I've a book for you "${book.title}". 
</pre>
<p>The property is getted using the JavaBeans convention, so you have to create a getTitle() method to get the title of the book. </p>
<p>All the dynamic content is directly escaped by the template engine to avoid XSS security exploits. If you really want to not escape something, you have to use the raw() method available on all the strings. By example, for our title : </p>
<pre class="code literal-block"><span></span>${book.title.raw()}
</pre>
<p>But this is not a really good practice, and must be used only when it's necessary. </p>
<p>You can add comments to your templates if you want : </p>
<pre class="code literal-block"><span></span>*{Will not be evaluated by the template engine}*
</pre>
<h4>Iterate over a list</h4>
<p>An important thing to do in template and that comes really soon is the iterate over a collection. By example, we can pass a list of books to the view from the controller : </p>
<pre class="code literal-block"><span></span>    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">index</span><span class="o">()</span> <span class="o">{</span>
        <span class="n">List</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;</span> <span class="n">books</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;</span><span class="n">Book</span><span class="o">&gt;(</span><span class="mi">3</span><span class="o">);</span>

        <span class="n">books</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">"Hello Play !"</span><span class="o">));</span>
        <span class="n">books</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">"Hello Template !"</span><span class="o">));</span>
        <span class="n">books</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="k">new</span> <span class="n">Book</span><span class="o">(</span><span class="s">"Hello Engine !"</span><span class="o">));</span>

        <span class="n">render</span><span class="o">(</span><span class="n">books</span><span class="o">);</span>
    <span class="o">}</span>
</pre>
<p>And then, you can iterate over the list using the <em>list</em> tag : </p>
<pre class="code literal-block"><span></span>#{extends 'main.html' /}
#{set title:'Home' /}
I've some books for your :
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    #{list items:books, as:'book'}
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>${book.title}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    #{/list}
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre>
<p>And that will display a single little list in our web page. Not to complicated :)</p>
<h4>Using scripts</h4>
<p>If you have to make complicated things, you can using scripts in Groovy. In scripts, you can declare variables and use all the other variables. By example, you can make the title upper case in a script : </p>
<pre class="code literal-block"><span></span>#{extends 'main.html' /}
#{set title:'Home' /}
I've some books for your :
<span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    #{list items:books, as:'book'}
        %{
           bookTitle = book.title.toUpperCase();
        }%
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>${bookTitle}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    #{/list}
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre>
<p>But you can also do iterations, conditions and a lot of other things. But keep in mind that the templates are not the good place to make complicated things, for that you have the controller and the models. The template must be as simple as possible. </p>
<h4>Define tags</h4>
<p>There is lot of tags in Play Framework, but you can create your own tags. For that, you just have to create a folder tags in your views folder. By example, if you create booklist.html in views/tags and add the following code : </p>
<pre class="code literal-block"><span></span><span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
    #{list items:_items, as:'book'}
        %{
            bookTitle = book.title.toUpperCase();
        }%
        <span class="p">&lt;</span><span class="nt">li</span><span class="p">&gt;</span>${bookTitle}<span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
    #{/list}
<span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</pre>
<p>The arguments are obtained using '_' following by the name of the arguments (_items in our example). </p>
<p>You can refactor the template index.html using the new tag : </p>
<pre class="code literal-block"><span></span>#{extends 'main.html' /}
#{set title:'Home' /}
I've some books for your :
#{booklist items:books /}
</pre>
<p>You give arguments like in any other tag. This can help you to make cleaner templates and to avoid to copy/paste some codes. </p>
<p>So we've now covered the basis of the template engine of Play Framework. With all that we've seen, we can start to create simple Play Applications. </p>
<p>A really good resources for Play Developer is the <a target="_blank" href="http://download.playframework.org/miscellaneous/play-cheat-sheet.pdf">Play Cheat Sheet</a>. You can also consult the <a target="_blank" href="http://www.playframework.org/documentation/1.0.3/home">official documentation</a> for more complete informations.</p>
</div>
</div>
<aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/java.html" rel="tag">Java</a></li>
<li><a class="tag p-category" href="../../../categories/play.html" rel="tag">Play!</a></li>
<li><a class="tag p-category" href="../../../categories/web.html" rel="tag">Web</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous">
<a href="osgi-hello-world-services.html" rel="prev" title="OSGi - Simple Hello World with services">Previous post</a>
</li>
<li class="next">
<a href="tip-profile-osgi-application-visualvm.html" rel="next" title="Tip : Profile an OSGi application with VisualVM">Next post</a>
</li>
</ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
<div id="disqus_thread"></div>
<script src="/cdn-cgi/scripts/78d64697/cloudflare-static/email-decode.min.js"></script><script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2010/07/play-framework-template-engine.html",
        disqus_title="Play Framework - The template engine",
        disqus_identifier="cache/posts/2010/07/play-framework-template-engine.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
<a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
</section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> 
</div>

</div>



<footer>
Contents Â© 2017 <a href="/cdn-cgi/l/email-protection#7a181b0a0e13090e1f0d1319120e3a1d171b131654191517">Baptiste Wicht</a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> - License:
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
<ul class="footer_inline_ul">
<li>
<a href="play-framework-template-engine.wp" id="sourcelink">Source</a>
</li>
</ul></footer><script src="/cdn-cgi/scripts/78d64697/cloudflare-static/email-decode.min.js"></script><script src="../../../assets/js/all-nocdn.js"></script>
</body>
</html>
