<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Develop a modular application – Implementation | Blog blog("Baptiste Wicht");</title>
<script src="/cdn-cgi/apps/head/98vpnawSZZMscPn4oDND-ZgswjM.js"></script><link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2010/05/develop-a-modular-application-implementation.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="modular-application-modules.html" title="Develop a modular application – The modules" type="text/html">
<link rel="next" href="modular-application-loading-modules.html" title="Develop a modular application - The loading" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="Develop a modular application – Implementation">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2010/05/develop-a-modular-application-implementation.html">
<meta property="og:description" content="Now that we saw in details the characteristics of the modules, we'll see how to implement a module.
We need a simple container for our module to load it after with a loader from the modular applicatio">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2010-05-12T06:29:23+02:00">
<meta property="article:tag" content="Conception">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Modular">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="publisher" href="https://plus.google.com/+BaptisteWicht">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2175227-7', 'auto');
  var metas = document.getElementsByTagName('meta'), tagsList = [];
  for (var i=0; i<metas.length; i++) {
    if (metas[i].getAttribute('property') == 'article:tag') {
      tagsList.push( metas[i].getAttribute('content'));
    }
  }
  ga('set', 'dimension1', tagsList.join('|'));
  ga('send', 'pageview');
</script>
</head>
<body>

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
<div class="container-fluid">

<div class="row">
<div class="col-sm-3 col-lg-2">
<nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="http://baptiste-wicht.com/">
<span id="blog-title">Blog blog("Baptiste Wicht");</span>
</a>
</div>

<div class="collapse navbar-collapse navbar-ex1-collapse">
<ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
</li>
<li>
<a href="../../../stories/publications.html">Publications</a>
</li>
<li>
<a href="../../../stories/projects.html">Projects</a>
</li>
<li>
<a href="../../../categories/index.html">Tags</a>
</li>
<li>
<a href="../../../archive.html">Archives</a>
</li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>
</li>
<li class="navbar-content">
<h3>Related posts</h3>
</li>
<li><a href="../02/modular-application-jtheque-core-2-0-3.html">Develop a modular application with JTheque Core 2.0.3</a></li>
<li><a href="modular-application-loading-modules.html">Develop a modular application - The loading</a></li>
<li><a href="develop-a-modular-application-bases.html">Develop a modular application – Bases</a></li>
<li><a href="modular-application-modules.html">Develop a modular application – The modules</a></li>
<li><a href="../07/modular-java-book-review.html">Modular Java – Book Review</a></li>
<li><a href="../03/bundle-non-osgi-dependencies-maven.html">Bundle non-OSGi dependencies with Maven</a></li>
<li class="navbar-block">
<li class="wicht-navbar-right">
<a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
<img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
</li>
<li class="wicht-navbar-right">
<a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
<img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
</li>
</ul>
</div>

</nav>
</div> 
<div class="col-sm-9 col-lg-10">
<div id="content"></div>
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Develop a modular application – Implementation</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">
Baptiste Wicht
</span></p>
<p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2010-05-12T06:29:23+02:00" itemprop="datePublished" title="2010-05-12 06:29">2010-05-12 06:29</time></a></p>
<p class="commentline">
<a href="develop-a-modular-application-implementation.html#disqus_thread" data-disqus-identifier="cache/posts/2010/05/develop-a-modular-application-implementation.html">Comments</a>
</p>
<p class="sourceline"><a href="develop-a-modular-application-implementation.wp" class="sourcelink">Source</a></p>
</div>
</header><div class="e-content entry-content" itemprop="articleBody text">
<div>
<p>Now that we saw in details <a href="http://www.baptiste-wicht.com/2010/05/modular-application-modules/">the characteristics of the modules</a>, we'll see how to implement a module.</p>
<p>We need a simple container for our module to load it after with a loader from the modular application.</p>
<p>In this post, we'll only see what will be a module in Java, we'll the loading of the modules in the next (and last) post.</p>

<p>A module is completely independent of the module, so we cannot include it directly in the application. We must distinguish the file of the module and the file of the application.</p>
<p>So what will be these files ? Because we're in Java, we use Jar files. So the modules will be Jar files extending the applications.</p>
<p>And now in Java, a module will be an interface describing the main characteristics of the module. We'll be simple for the moment. A module must be pluggable to the application and unpluggable. Moreover the module has also a name and we can get this name. At this moment, this is all we need :</p>
<p>We must have a simple interface to describe a module :</p>
<pre class="code literal-block"><span></span><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">IModule</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">plug</span><span class="o">();</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">unplug</span><span class="o">();</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">();</span>
<span class="o">}</span>
</pre>
<p>With that interface, we can create the most simple module that only prints to the console :</p>
<pre class="code literal-block"><span></span><span class="kn">package</span> <span class="nn">org.modules.simple</span><span class="o">;</span> 

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">SimpleModule</span> <span class="kd">implements</span> <span class="n">IModule</span> <span class="o">{</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">plug</span><span class="o">(){</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello kernel !"</span><span class="o">);</span>
  <span class="o">}</span> 

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">unplug</span><span class="o">(){</span>
    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Bye kernel !"</span><span class="o">);</span>
  <span class="o">}</span> 

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">(){</span>
    <span class="k">return</span> <span class="s">"Simple module"</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre>
<p>So we'll create a Jar file containing our class. We need a solution for the application to know which class to launch. So we need write this somewhere.</p>
<p>A naïve solution is to browse the Jar file and test each class if it implements the interface. This method works but is not optimal but that can be really inefficient in large Jar file. So we'll use the tools offered by Java and add an information in the Jar manifest to indicate to the application which class must be loaded.</p>
<p>So here it's the manifest for our example :</p>
<pre>Manifest-Version: 1.0
Module-Class: org.modules.simple.SimpleModule</pre>
<p>With that the module loader will know which class it must instantiate to create a module. An other solution is to use the ServiceLoader of Java 6.</p>
<p>In the next post, we'll see how to load our module and we'll test an application with two simples modules.</p>
</div>
</div>
<aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/conception.html" rel="tag">Conception</a></li>
<li><a class="tag p-category" href="../../../categories/java.html" rel="tag">Java</a></li>
<li><a class="tag p-category" href="../../../categories/modular.html" rel="tag">Modular</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous">
<a href="modular-application-modules.html" rel="prev" title="Develop a modular application – The modules">Previous post</a>
</li>
<li class="next">
<a href="modular-application-loading-modules.html" rel="next" title="Develop a modular application - The loading">Next post</a>
</li>
</ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
<div id="disqus_thread"></div>
<script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2010/05/develop-a-modular-application-implementation.html",
        disqus_title="Develop a modular application \u2013 Implementation",
        disqus_identifier="cache/posts/2010/05/develop-a-modular-application-implementation.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
<a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
</section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> 
</div>

</div>



<footer>
Contents © 2017 <a href="/cdn-cgi/l/email-protection#3a585b4a4e53494e5f4d5359524e7a5d575b535614595557">Baptiste Wicht</a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> - License:
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
<ul class="footer_inline_ul">
<li>
<a href="develop-a-modular-application-implementation.wp" id="sourcelink">Source</a>
</li>
</ul></footer><script src="/cdn-cgi/scripts/78d64697/cloudflare-static/email-decode.min.js"></script><script src="../../../assets/js/all-nocdn.js"></script>
</body>
</html>
