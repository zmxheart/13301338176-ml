<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Java 7 : Languages updates from Project Coin | Blog blog("Baptiste Wicht");</title>
<script src="/cdn-cgi/apps/head/98vpnawSZZMscPn4oDND-ZgswjM.js"></script><link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2010/04/java-7-updates-project-coin.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="jtheque-problems-migrating-osgi.html" title="JTheque : Problems when migrating to OSGi" type="text/html">
<link rel="next" href="using-substance-look-and-feel-in-osgi.html" title="Using Substance Look And Feel in OSGi" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="Java 7 : Languages updates from Project Coin">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2010/04/java-7-updates-project-coin.html">
<meta property="og:description" content="I continue my posts on the new features of Java 7. In this post, I'll detail the news coming from the Project Coin. This project has computed more than 70 new features proposal from the Java community">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2010-04-19T06:30:24+02:00">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Java 7">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="publisher" href="https://plus.google.com/+BaptisteWicht">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2175227-7', 'auto');
  var metas = document.getElementsByTagName('meta'), tagsList = [];
  for (var i=0; i<metas.length; i++) {
    if (metas[i].getAttribute('property') == 'article:tag') {
      tagsList.push( metas[i].getAttribute('content'));
    }
  }
  ga('set', 'dimension1', tagsList.join('|'));
  ga('send', 'pageview');
</script>
</head>
<body>

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
<div class="container-fluid">

<div class="row">
<div class="col-sm-3 col-lg-2">
<nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="http://baptiste-wicht.com/">
<span id="blog-title">Blog blog("Baptiste Wicht");</span>
</a>
</div>

<div class="collapse navbar-collapse navbar-ex1-collapse">
<ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
</li>
<li>
<a href="../../../stories/publications.html">Publications</a>
</li>
<li>
<a href="../../../stories/projects.html">Projects</a>
</li>
<li>
<a href="../../../categories/index.html">Tags</a>
</li>
<li>
<a href="../../../archive.html">Archives</a>
</li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>
</li>
<li class="navbar-content">
<h3>Related posts</h3>
</li>
<li><a href="../../2011/07/java-7-has-been-released.html">Java 7 has been released!</a></li>
<li><a href="../05/java-7-add-public-defender-methods-to-java-interfaces.html">Java 7 : Add "public defender methods" to Java interfaces</a></li>
<li><a href="../08/java-7-try-with-resources-statement.html">Java 7 : The new try-with-resources statement</a></li>
<li><a href="../08/file-copy-benchmark-updates-once-again.html">Java File Copy Benchmark Updates (once again)</a></li>
<li><a href="../05/better-exception-handling-in-java-7-multicatch-and-final-rethrow.html">Better exception handling in Java 7 : Multicatch and final rethrow</a></li>
<li><a href="../09/jdk-7-features-updated-plan-b-is-apparently-here.html">JDK 7 Features updated ! Plan B has apparently been approved</a></li>
<li class="navbar-block">
<li class="wicht-navbar-right">
<a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
<img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
</li>
<li class="wicht-navbar-right">
<a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
<img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
</li>
</ul>
</div>

</nav>
</div> 
<div class="col-sm-9 col-lg-10">
<div id="content"></div>
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Java 7 : Languages updates from Project Coin</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">
Baptiste Wicht
</span></p>
<p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2010-04-19T06:30:24+02:00" itemprop="datePublished" title="2010-04-19 06:30">2010-04-19 06:30</time></a></p>
<p class="commentline">
<a href="java-7-updates-project-coin.html#disqus_thread" data-disqus-identifier="cache/posts/2010/04/java-7-updates-project-coin.html">Comments</a>
</p>
<p class="sourceline"><a href="java-7-updates-project-coin.wp" class="sourcelink">Source</a></p>
</div>
</header><div class="e-content entry-content" itemprop="articleBody text">
<div>
<p>I continue my posts on the new features of Java 7. In this post, I'll detail the news coming from the Project Coin. This project has computed more than 70 new features proposal from the Java community for integration in Java 7.</p>
<p>In this post, I'll detail the Final Five (or So) features chosen from this project to be included in Java 7.</p>
<h4>Diamond Syntax</h4>
<p>This feature is a really simple syntax improvement for generics. With that feature, you can avoid to write twice the generics type in a generics declaration. A little example :</p>
<p>Instead of writing this :</p>
<pre class="code literal-block"><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedHashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;&gt;();</span>
</pre>
<p>You can now write that :</p>
<pre class="code literal-block"><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">Collection</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinkedHashMap</span><span class="o">&lt;&gt;();</span>
</pre>
<p>That's really practical, but not essential.</p>
<h4>Simplified Varargs Method Invocation</h4>
<p>This improvement is not a new functionality, but only a move of a warning. Like you must know, we cannot create arrray of generics type because the type verification is not made at the same time. But with the Ellipse of Java 5, you can made that type of array implicitely and the compiler generate warning at each invocation of that kind of method, so the warning has moved to the method declaration to have less warnings.</p>
<h4>Integers declaration</h4>
<p>You'll can declare integers using binary values :</p>
<pre class="code literal-block"><span></span><span class="kt">int</span> <span class="n">binary</span> <span class="o">=</span> <span class="mb">0b11001001001</span><span class="o">;</span>
</pre>
<p>and you can use _ (underscores) in the declaration :</p>
<pre class="code literal-block"><span></span><span class="kt">double</span> <span class="n">amount</span> <span class="o">=</span> <span class="mf">1_999_888_777.25</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">color</span> <span class="o">=</span> <span class="mh">0xdd_dd_dd</span><span class="o">;</span>
<span class="kt">int</span> <span class="n">binary</span> <span class="o">=</span> <span class="mb">0b110_0100_1001</span><span class="o">;</span>
</pre>
<p>That's allow to make more verbose code, but it's only sugar.</p>
<h4>Collections manipulations and declaration</h4>
<p>Another improvements to code verbosity, is the support of collections in the language. You'll have code facility to access and edit indexed collections like list and maps and to declare easily collections.</p>
<p>First, you can access to an element using the same syntax as the array :</p>
<pre class="code literal-block"><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">map</span> <span class="o">=</span> <span class="o">...;</span>
<span class="n">String</span> <span class="n">firstValue</span> <span class="o">=</span> <span class="n">list</span><span class="o">[</span><span class="mi">0</span><span class="o">];</span>
<span class="n">map</span><span class="o">[</span><span class="s">"Test"</span><span class="o">]</span> <span class="o">=</span> <span class="n">firstValue</span><span class="o">;</span>
<span class="n">String</span> <span class="n">valueFromMap</span> <span class="o">=</span> <span class="n">map</span><span class="o">[</span><span class="s">"Test"</span><span class="o">];</span>
</pre>
<p>For the maps, that works with any type of key. So if you have one of your class for key, you can directly pass it in the code like the Strings in my example.</p>
<p>And, you can also quickly declare collections like array :</p>
<p>Lists with [] :</p>
<pre class="code literal-block"><span></span><span class="n">List</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">[</span> <span class="mi">1</span><span class="o">,</span> <span class="mi">2</span><span class="o">,</span> <span class="mi">4</span><span class="o">,</span> <span class="mi">8</span><span class="o">,</span> <span class="mi">16</span><span class="o">,</span> <span class="mi">32</span><span class="o">,</span> <span class="mi">64</span><span class="o">,</span> <span class="mi">128</span> <span class="o">];</span>
</pre>
<p>Sets with {}</p>
<pre class="code literal-block"><span></span><span class="n">Set</span><span class="o">&lt;</span><span class="n">Integer</span><span class="o">&gt;</span> <span class="n">numbers</span> <span class="o">=</span> <span class="o">{</span> <span class="mi">256</span><span class="o">,</span> <span class="mi">512</span><span class="o">,</span> <span class="mi">1024</span><span class="o">,</span> <span class="mi">2048</span><span class="o">,</span> <span class="mi">4096</span> <span class="o">};</span>
</pre>
<p>And Maps with {} and : to split value and key :</p>
<pre class="code literal-block"><span></span><span class="n">Map</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">translations</span> <span class="o">=</span> <span class="o">{</span>
  <span class="s">"Hi"</span> <span class="o">:</span> <span class="s">"Bonjour"</span><span class="o">,</span>
  <span class="s">"Goodbye"</span> <span class="o">:</span> <span class="s">"Au revoir"</span><span class="o">,</span>
  <span class="s">"Thanks"</span> <span class="o">:</span> <span class="s">"Merci"</span>
<span class="o">}</span> 
</pre>
<p>All that created collections are immutables.</p>
<h4>Strings switch</h4>
<p>A really good feature : Switch with Strings values. You can now do that kind of switch : ¨</p>
<pre class="code literal-block"><span></span><span class="n">String</span> <span class="n">value</span> <span class="o">=</span> <span class="s">""</span><span class="o">;</span>

<span class="k">switch</span> <span class="o">(</span><span class="n">language</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">case</span> <span class="s">"fr"</span><span class="o">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="s">"Bonjour"</span><span class="o">;</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="k">case</span> <span class="s">"en"</span><span class="o">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="s">"Hi"</span><span class="o">;</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="k">case</span> <span class="s">"de"</span><span class="o">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="s">"Guten tag"</span><span class="o">;</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="k">default</span><span class="o">:</span>
    <span class="n">value</span> <span class="o">=</span> <span class="s">"Hello"</span><span class="o">;</span>
    <span class="k">break</span><span class="o">;</span>
<span class="o">}</span>
</pre>
<p>I thinks, it's really great. With that, we can delete a lot of ugly list of if/else if code.</p>
<h4>Automatic Resource Management (ARM)</h4>
<p>Another great feature, you can automatically close the resources using a new try clause :</p>
<pre class="code literal-block"><span></span><span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="n">URL</span> <span class="n">url</span><span class="o">,</span> <span class="n">File</span> <span class="n">file</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">IOException</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">(</span> <span class="n">FileOutputStream</span> <span class="n">fos</span> <span class="o">=</span> <span class="k">new</span> <span class="n">FileOutputStream</span><span class="o">(</span><span class="n">file</span><span class="o">);</span> <span class="n">InputStream</span> <span class="n">is</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="na">openStream</span><span class="o">()</span> <span class="o">)</span> <span class="o">{</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">2048</span><span class="o">];</span>
    <span class="kt">int</span> <span class="n">len</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">is</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">))</span> <span class="o">&amp;</span><span class="n">amp</span><span class="o">;</span><span class="n">gt</span><span class="o">;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">fos</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">len</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre>
<p>In that code, the FileOutputStream and the InputStream will automatically be closed after the try, making a cleared code and you cannot forgot a resource with that.</p>
<p>And last, the modifications to support the JSR 292 directly in the language. I've already described that features in other post : <a title="Java 7 : More dynamics" href="http://www.baptiste-wicht.com/2010/04/java-7-more-dynamics/" target="_self">Java 7 : More Dynamics</a></p>
<p>That's all for these new language enhancements from the Project Coin.</p>
<p>For me, i like the new ARM and the Strings Switch, but i think this is simple enhancements, they were others proposals in the Project Coin i found better, like the "Improved Exception Handling for Java", "Improved Wildcard Syntax for Java" or "Elvis and Other Null-Safe Operators", but this a good start.</p>
</div>
</div>
<aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/java.html" rel="tag">Java</a></li>
<li><a class="tag p-category" href="../../../categories/java-7.html" rel="tag">Java 7</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous">
<a href="jtheque-problems-migrating-osgi.html" rel="prev" title="JTheque : Problems when migrating to OSGi">Previous post</a>
</li>
<li class="next">
<a href="using-substance-look-and-feel-in-osgi.html" rel="next" title="Using Substance Look And Feel in OSGi">Next post</a>
</li>
</ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
<div id="disqus_thread"></div>
<script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2010/04/java-7-updates-project-coin.html",
        disqus_title="Java 7 : Languages updates from Project Coin",
        disqus_identifier="cache/posts/2010/04/java-7-updates-project-coin.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
<a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
</section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> 
</div>

</div>



<footer>
Contents © 2017 <a href="/cdn-cgi/l/email-protection#2e4c4f5e5a475d5a4b59474d465a6e49434f4742004d4143">Baptiste Wicht</a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> - License:
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
<ul class="footer_inline_ul">
<li>
<a href="java-7-updates-project-coin.wp" id="sourcelink">Source</a>
</li>
</ul></footer><script src="/cdn-cgi/scripts/78d64697/cloudflare-static/email-decode.min.js"></script><script src="../../../assets/js/all-nocdn.js"></script>
</body>
</html>
