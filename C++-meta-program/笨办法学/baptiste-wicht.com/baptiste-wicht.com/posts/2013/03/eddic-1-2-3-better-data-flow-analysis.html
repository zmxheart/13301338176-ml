<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>eddic 1.2.3 - Better data-flow analysis | Blog blog("Baptiste Wicht");</title>
<script src="/cdn-cgi/apps/head/98vpnawSZZMscPn4oDND-ZgswjM.js"></script><link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2013/03/eddic-1-2-3-better-data-flow-analysis.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="../01/eddic-1-2-2-performances-optimization-library.html" title="eddic 1.2.2 - Performances, improved optimizations and additions to standard library" type="text/html">
<link rel="next" href="../06/some-news.html" title="Some news" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="eddic 1.2.3 - Better data-flow analysis">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2013/03/eddic-1-2-3-better-data-flow-analysis.html">
<meta property="og:description" content="I finally finished the version 1.2.3 of eddic. I have been quite busy finishing my master thesis in february and then taking some vacations in United States, so this version came later than I wanted. ">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2013-03-09T11:50:27+01:00">
<meta property="article:tag" content="Compilers">
<meta property="article:tag" content="EDDI">
<meta property="article:tag" content="Optimization">
<meta property="article:tag" content="projects">
<meta property="article:tag" content="Releases">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="publisher" href="https://plus.google.com/+BaptisteWicht">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2175227-7', 'auto');
  var metas = document.getElementsByTagName('meta'), tagsList = [];
  for (var i=0; i<metas.length; i++) {
    if (metas[i].getAttribute('property') == 'article:tag') {
      tagsList.push( metas[i].getAttribute('content'));
    }
  }
  ga('set', 'dimension1', tagsList.join('|'));
  ga('send', 'pageview');
</script>
</head>
<body>

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
<div class="container-fluid">

<div class="row">
<div class="col-sm-3 col-lg-2">
<nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="http://baptiste-wicht.com/">
<span id="blog-title">Blog blog("Baptiste Wicht");</span>
</a>
</div>

<div class="collapse navbar-collapse navbar-ex1-collapse">
<ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
</li>
<li>
<a href="../../../stories/publications.html">Publications</a>
</li>
<li>
<a href="../../../stories/projects.html">Projects</a>
</li>
<li>
<a href="../../../categories/index.html">Tags</a>
</li>
<li>
<a href="../../../archive.html">Archives</a>
</li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>
</li>
<li class="navbar-content">
<h3>Related posts</h3>
</li>
<li><a href="../01/eddic-1-2-2-performances-optimization-library.html">eddic 1.2.2 - Performances, improved optimizations and additions to standard library</a></li>
<li><a href="../../2012/12/eddic-1-2-0-single-inheritance-copy-constructor.html">eddic 1.2.0 - Single inheritance, copy construction</a></li>
<li><a href="../../2012/11/eddic-compiler-1-1-4-graph-coloring-register-allocation.html">EDDI Compiler 1.1.4 – Graph Coloring Register Allocation</a></li>
<li><a href="../../2012/07/eddi-compiler-1-0-3-inlining-register-allocation.html">EDDI Compiler 1.0.3 - Inlining and register allocation</a></li>
<li><a href="../../2012/06/eddic-1-0-structures-global-optimizations.html">EDDI Compiler 1.0 - Structures and Global Optimizations</a></li>
<li><a href="../../2012/02/eddic-0-8-1-do-while-loop-and-better-optimization.html">EDDIC 0.8.1 : do while loop and better optimization </a></li>
<li class="navbar-block">
<li class="wicht-navbar-right">
<a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
<img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
</li>
<li class="wicht-navbar-right">
<a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
<img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
</li>
</ul>
</div>

</nav>
</div> 
<div class="col-sm-9 col-lg-10">
<div id="content"></div>
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">eddic 1.2.3 - Better data-flow analysis</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">
Baptiste Wicht
</span></p>
<p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2013-03-09T11:50:27+01:00" itemprop="datePublished" title="2013-03-09 11:50">2013-03-09 11:50</time></a></p>
<p class="commentline">
<a href="eddic-1-2-3-better-data-flow-analysis.html#disqus_thread" data-disqus-identifier="cache/posts/2013/03/eddic-1-2-3-better-data-flow-analysis.html">Comments</a>
</p>
<p class="sourceline"><a href="eddic-1-2-3-better-data-flow-analysis.wp" class="sourcelink">Source</a></p>
</div>
</header><div class="e-content entry-content" itemprop="articleBody text">
<div>
<p>I finally finished the version 1.2.3 of eddic. I have been quite busy finishing my master thesis in february and then taking some vacations in United States, so this version came later than I wanted. </p>
<p>The main change is about the speed of the data-flow optimizations. I refactored a lot the data-flow to make it much faster. Some test cases are up to 10 times faster :)</p>
<p>There are still some work to do for speed of optimizations, but it is much better now. Dead Code Elimination and Constant Propagation still have to be made faster, but now the main bottleneck. In the next version of eddic, the parsing performance will be improved. </p>
<p>Inlining performance has also been greatly improved. The functions are considered in topological order of the call graph. This makes it much faster and moreover the resulting code is more efficient too. </p>
<p>There are also some improvements of the language. char and bool types now takes only one byte each. Copy constructors for structures containing field of structure type are now automatically generated. The grammar has been enhanced to support postfix operations in for loops. </p>
<p>Other improvements have been made to the optimization engine. A new optimization has been implemented: Loop Unswitching. This optimization transforms a code like that: </p>
<pre class="code literal-block"><span></span><span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span> <span class="n">X</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">){</span>
        <span class="c1">//Something</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">//Something else</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
<p>In some code like that: </p>
<pre class="code literal-block"><span></span><span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">){</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span> <span class="n">X</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">){</span>
        <span class="c1">//Something</span>
    <span class="p">}</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&amp;</span><span class="n">lt</span><span class="p">;</span> <span class="n">X</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">){</span>
        <span class="c1">//Something else</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre>
<p>when a doesn't depend on the loop body. The body of the loops is much faster in the second version. </p>
<p>The induction variable analysis is now able to handle loops with induction variable divided in each iteration. With that new feature, the call: </p>
<pre class="code literal-block"><span></span><span class="n">print</span><span class="p">(</span><span class="mi">123</span><span class="p">);</span>
</pre>
<p>is reduced to</p>
<pre class="code literal-block"><span></span><span class="n">print</span><span class="p">(</span><span class="sc">'1'</span><span class="p">);</span>
<span class="n">print</span><span class="p">(</span><span class="sc">'2'</span><span class="p">);</span>
<span class="n">print</span><span class="p">(</span><span class="sc">'3'</span><span class="p">);</span>
</pre>
<p>Another small optimization is that variables contributing only to themselves are now correctly identified as dead. </p>
<p>On the compiler side, the timing system has been greatly improved to contains almost all part of the compilation process. The timings for the complete compilation is available <a href="https://github.com/wichtounet/eddic/wiki/Performance" title="Performance">on the wiki</a>. </p>
<h4>Future Work</h4>
<p>The next version of the EDDI compiler (eddic) will be the version 1.2.4. </p>
<p>Performances will stil be focused for this version. The first change will be to improve the performances of the parsing. Then, I'm gonna try to improve register allocation performances by improving handling of bound registers which I believe is a bottleneck. </p>
<p>There are also several refactorings that I think of doing to the code. I will probably also implement new minor language features, but I still don't know what. </p>
<p>Moreover, I have to serve in the army the next three weeks, so there won't be any progress these weeks. </p>
<h4>Download</h4>
<p>You can find the EDDI Compiler sources on the Github repository: <a title="Github repository of eddic" href="https://github.com/wichtounet/eddic">https://github.com/wichtounet/eddic</a></p>
<p>The version is available in the <em>v1.2.3</em> tag available in the GitHub or directly in the <em>master</em> branch.</p>
</div>
</div>
<aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/compilers.html" rel="tag">Compilers</a></li>
<li><a class="tag p-category" href="../../../categories/eddi.html" rel="tag">EDDI</a></li>
<li><a class="tag p-category" href="../../../categories/optimization.html" rel="tag">Optimization</a></li>
<li><a class="tag p-category" href="../../../categories/projects.html" rel="tag">projects</a></li>
<li><a class="tag p-category" href="../../../categories/releases.html" rel="tag">Releases</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous">
<a href="../01/eddic-1-2-2-performances-optimization-library.html" rel="prev" title="eddic 1.2.2 - Performances, improved optimizations and additions to standard library">Previous post</a>
</li>
<li class="next">
<a href="../06/some-news.html" rel="next" title="Some news">Next post</a>
</li>
</ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
<div id="disqus_thread"></div>
<script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2013/03/eddic-1-2-3-better-data-flow-analysis.html",
        disqus_title="eddic 1.2.3 - Better data-flow analysis",
        disqus_identifier="cache/posts/2013/03/eddic-1-2-3-better-data-flow-analysis.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
<a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
</section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> 
</div>

</div>



<footer>
Contents © 2017 <a href="/cdn-cgi/l/email-protection#d0b2b1a0a4b9a3a4b5a7b9b3b8a490b7bdb1b9bcfeb3bfbd">Baptiste Wicht</a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> - License:
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
<ul class="footer_inline_ul">
<li>
<a href="eddic-1-2-3-better-data-flow-analysis.wp" id="sourcelink">Source</a>
</li>
</ul></footer><script src="/cdn-cgi/scripts/78d64697/cloudflare-static/email-decode.min.js"></script><script src="../../../assets/js/all-nocdn.js"></script>
</body>
</html>
