<!DOCTYPE html>
<html prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article# " lang="en">
<head>
<meta charset="utf-8">
<meta name="description" content="Presentation of the new version of zapcc and comparison against clang and gcc on a template-heavy library.">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Release of zapcc 1.0 - Fast C++ compiler | Blog blog("Baptiste Wicht");</title>
<script src="/cdn-cgi/apps/head/98vpnawSZZMscPn4oDND-ZgswjM.js"></script><link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../../rss.xml">
<link rel="canonical" href="http://baptiste-wicht.com/posts/2017/03/release-zapcc-10-fast-cpp-compiler.html">
<!--[if lt IE 9]><script src="../../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Baptiste Wicht">
<link rel="prev" href="../02/home-automation-first-attempt-voice-control-jarvis.html" title="Home Automation: First attempt at voice control with Jarvis" type="text/html">
<link rel="next" href="migrated-from-owncloud-5-to-nextcloud-11.html" title="Migrated from owncloud 5 to Nextcloud 11" type="text/html">
<meta property="og:site_name" content='Blog blog("Baptiste Wicht");'>
<meta property="og:title" content="Release of zapcc 1.0 - Fast C++ compiler">
<meta property="og:url" content="http://baptiste-wicht.com/posts/2017/03/release-zapcc-10-fast-cpp-compiler.html">
<meta property="og:description" content="Presentation of the new version of zapcc and comparison against clang and gcc on a template-heavy library.">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2017-03-02T14:50:04+01:00">
<meta property="article:tag" content="C++">
<meta property="article:tag" content="clang">
<meta property="article:tag" content="Compilers">
<meta property="article:tag" content="etl">
<meta property="article:tag" content="gcc">
<meta property="article:tag" content="projects">
<meta property="article:tag" content="zapcc">
<link href="../../../favicon.ico" rel="icon" type="image/x-icon">
<link rel="publisher" href="https://plus.google.com/+BaptisteWicht">
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-2175227-7', 'auto');
  var metas = document.getElementsByTagName('meta'), tagsList = [];
  for (var i=0; i<metas.length; i++) {
    if (metas[i].getAttribute('property') == 'article:tag') {
      tagsList.push( metas[i].getAttribute('content'));
    }
  }
  ga('set', 'dimension1', tagsList.join('|'));
  ga('send', 'pageview');
</script>
</head>
<body>

<a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
<div class="container-fluid">

<div class="row">
<div class="col-sm-3 col-lg-2">
<nav class="navbar navbar-inverse navbar-fixed-side"><div class="navbar-header">
<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
<span class="sr-only">Toggle navigation</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a class="navbar-brand" href="http://baptiste-wicht.com/">
<span id="blog-title">Blog blog("Baptiste Wicht");</span>
</a>
</div>

<div class="collapse navbar-collapse navbar-ex1-collapse">
<ul class="nav navbar-nav">
<li>
<a href="../../../stories/about.html">About</a>
</li>
<li>
<a href="../../../stories/publications.html">Publications</a>
</li>
<li>
<a href="../../../stories/projects.html">Projects</a>
</li>
<li>
<a href="../../../categories/index.html">Tags</a>
</li>
<li>
<a href="../../../archive.html">Archives</a>
</li>
<li>
<a href="http://feeds.feedburner.com/BaptisteWicht">RSS</a>
</li>
<li class="navbar-content">
<h3>Related posts</h3>
</li>
<li><a href="../../2016/11/zapcc-a-faster-cpp-compiler.html">zapcc - a faster C++ compiler</a></li>
<li><a href="../../2016/12/zapcc-cpp-compilation-speed-against-gcc-54-and-clang-39.html">zapcc C++ compilation speed against gcc 5.4 and clang 3.9</a></li>
<li><a href="../08/compiler-benchmark-gcc-clang-cpp-library-etl.html">Compiler benchmark GCC and Clang on C++ library (ETL)</a></li>
<li><a href="partial-type-erasing-deep-learning-library-dll-improve-compilation-time.html">Partial type erasing in Deep Learning Library (DLL) to improve compilation time</a></li>
<li><a href="disappointing-zapcc-performance-on-deep-learning-library-dll.html">Disappointing zapcc performance on Deep Learning Library (DLL)</a></li>
<li><a href="../../2016/09/blazing-fast-unit-test-compilation-with-doctest-11.html">Blazing fast unit test compilation with doctest 1.1</a></li>
<li class="navbar-block">
<li class="wicht-navbar-right">
<a target="_blank" title="Follow @wichtounet on Twitter" href="https://twitter.com/wichtounet">
<img src="../../../assets/img/twitter.png" alt="Follow @wichtounet on Twitter"></a>
</li>
<li class="wicht-navbar-right">
<a target="_blank" title="Follow +BaptisteWicht on Google+" href="https://plus.google.com/+BaptisteWicht">
<img src="../../../assets/img/google_plus.png" alt="Follow +BaptisteWicht on Google+"></a>
</li>
</ul>
</div>

</nav>
</div> 
<div class="col-sm-9 col-lg-10">
<div id="content"></div>
<article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name"><a href="#" class="u-url">Release of zapcc 1.0 - Fast C++ compiler</a></h1>
<div class="metadata">
<p class="byline author vcard"><span class="byline-name fn" itemprop="author">
Baptiste Wicht
</span></p>
<p class="dateline"><a href="#" rel="bookmark"><time class="published dt-published" datetime="2017-03-02T14:50:04+01:00" itemprop="datePublished" title="2017-03-02 14:50">2017-03-02 14:50</time></a></p>
<p class="commentline">
<a href="release-zapcc-10-fast-cpp-compiler.html#disqus_thread" data-disqus-identifier="cache/posts/2017/03/release-zapcc-10-fast-cpp-compiler.html">Comments</a>
</p>
<p class="sourceline"><a href="release-zapcc-10-fast-cpp-compiler.rst" class="sourcelink">Source</a></p>
</div>
</header><div class="e-content entry-content" itemprop="articleBody text">
<div>
<p>If you remember, I recently wrote about <a class="reference external" href="http://baptiste-wicht.com/posts/2016/12/zapcc-cpp-compilation-speed-against-gcc-54-and-clang-39.html">zapcc C++ compilation speed against gcc 5.4 and clang 3.9</a> in which I was comparing the beta version of zapcc against gcc and clang.</p>
<p>I just been informed that zapcc was just released in version 1.0. I though it
was a good occasion to test it again. It will be compared against gcc-4.9,
gcc-5.3 and clang-3.9. This version is based on the trunk of clang-5.0.</p>
<p>Again, I will use my Expression Template Library (<a class="reference external" href="https://github.com/wichtounet/etl/">ETL</a>) project. This is a purely header-only
library with lots of templates. I'm going to compile the full test cases. This
is a perfect example for long compilation times.</p>
<p>The current tests are made on the last version of the library and with slightly
different parameters for compilation, therefore the absolute times are not
comparable, but the speedups should be comparable.</p>
<p>Just like last time, I have configured zapcc to let is use 2Go RAM per caching
server, which is the maximum allowed. Moreover, I killed the servers before each
tests.</p>
<div class="section" id="debug-results">
<h2>Debug results</h2>
<p>Let's start with a debug build, with no optimizations enabled. Every build will
use four threads. This is the equivalent of doing make -j4 debug/bin/etl_test
without the link step.</p>
<table border="1" class="docutils">
<colgroup>
<col width="73%">
<col width="27%">
</colgroup>
<thead valign="bottom"><tr>
<th class="head">Compiler</th>
<th class="head"> </th>
</tr></thead>
<tbody valign="top">
<tr>
<td>g++-4.9.3</td>
<td>190.09s</td>
</tr>
<tr>
<td>g++-5.3.0</td>
<td>200.92s</td>
</tr>
<tr>
<td>clang++-3.9</td>
<td>313.85</td>
</tr>
<tr>
<td>zapcc++</td>
<td>81.25</td>
</tr>
<tr>
<td>Speedup VS Clang</td>
<td>3.86</td>
</tr>
<tr>
<td>Speedup VS GCC-5.3</td>
<td>2.47</td>
</tr>
<tr>
<td>Speedup VS GCC-4.9</td>
<td>2.33</td>
</tr>
</tbody>
</table>
<p>The speedups are even more impressive than last time! zapcc is <strong>almost four
times fast than clang-3.9</strong> and around <strong>2.5 times faster than GCC-5.3</strong>.
Interestingly, we can see that gcc-5.3 is slighly slower than GCC-4.9.</p>
<p>It seems that they have the compiler even faster!</p>
</div>
<div class="section" id="release-results">
<h2>Release results</h2>
<p>Let's look now how the results are looking with optimizations enabled. Again,
every build will use four threads. This is the equivalent of doing make -j4
release_debug/bin/etl_test without the link step.</p>
<table border="1" class="docutils">
<colgroup>
<col width="75%">
<col width="25%">
</colgroup>
<thead valign="bottom"><tr>
<th class="head">Compiler</th>
<th class="head"> </th>
</tr></thead>
<tbody valign="top">
<tr>
<td>g++-4.9.3</td>
<td>252.99</td>
</tr>
<tr>
<td>g++-5.3.0</td>
<td>264.96</td>
</tr>
<tr>
<td>clang++-3.9</td>
<td>361.65</td>
</tr>
<tr>
<td>zapcc++</td>
<td>237.96</td>
</tr>
<tr>
<td>Speedup VS Clang</td>
<td>1.51</td>
</tr>
<tr>
<td>Speedup VS GCC-5.3</td>
<td>1.11</td>
</tr>
<tr>
<td>Speedup VS GCC-4.9</td>
<td>1.06</td>
</tr>
</tbody>
</table>
<p>We can see that this time the speedups are not as interesting as they were.
Very interestingly, it's the compiler that suffers the more from the
optimization overhead. Indeed, zapcc is three times slower in release mode than
it was in debug mode. Nevertheless, it still manages to beat the three other
compilers, by about 10% for Gcc and 50% than clang, which is already
interesting.</p>
<div class="section" id="conclusion">
<h3>Conclusion</h3>
<p>To conclude, we have observed that zapcc is always faster than the three
compilers tested in this experiment. Moreover, in debug mode, the speedups are
very significant, it was almost 4 times faster than clang and around 2.5 faster
than gcc.</p>
<p>I haven't seen any problem with the tool, it's like clang and it should generate
code of the same performance, but just compile it much faster. One problem
I have with zapcc is that it is not based on an already released version of
clang but on the trunk. That means it is hard to be compare with the exact same
version of clang and it is also a risk of running into clang bugs.</p>
<p>Although the prices have not been published yet, it is indicated on the website
that zapcc is free for non-commercial entities. Which is really great.</p>
<p>If you want more information, you can go to the
<a class="reference external" href="https://www.zapcc.com/">official website of zapcc</a></p>
</div>
</div>
</div>
</div>
<aside class="postpromonav"><nav><ul itemprop="keywords" class="tags">
<li><a class="tag p-category" href="../../../categories/c%2B%2B.html" rel="tag">C++</a></li>
<li><a class="tag p-category" href="../../../categories/clang.html" rel="tag">clang</a></li>
<li><a class="tag p-category" href="../../../categories/compilers.html" rel="tag">Compilers</a></li>
<li><a class="tag p-category" href="../../../categories/etl.html" rel="tag">etl</a></li>
<li><a class="tag p-category" href="../../../categories/gcc.html" rel="tag">gcc</a></li>
<li><a class="tag p-category" href="../../../categories/projects.html" rel="tag">projects</a></li>
<li><a class="tag p-category" href="../../../categories/zapcc.html" rel="tag">zapcc</a></li>
</ul>
<ul class="pager hidden-print">
<li class="previous">
<a href="../02/home-automation-first-attempt-voice-control-jarvis.html" rel="prev" title="Home Automation: First attempt at voice control with Jarvis">Previous post</a>
</li>
<li class="next">
<a href="migrated-from-owncloud-5-to-nextcloud-11.html" rel="next" title="Migrated from owncloud 5 to Nextcloud 11">Next post</a>
</li>
</ul></nav></aside><section class="comments hidden-print"><h2>Comments</h2>
<div id="disqus_thread"></div>
<script>
        var disqus_shortname ="blogwichtounet",
            disqus_url="http://baptiste-wicht.com/posts/2017/03/release-zapcc-10-fast-cpp-compiler.html",
        disqus_title="Release of zapcc 1.0 - Fast C++ compiler",
        disqus_identifier="cache/posts/2017/03/release-zapcc-10-fast-cpp-compiler.html",
        disqus_config = function () {
            this.language = "en";
        };
        (function() {
            var dsq = document.createElement('script'); dsq.async = true;
            dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script><noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a>
</noscript>
<a href="https://disqus.com" class="dsq-brlink" rel="nofollow">Comments powered by <span class="logo-disqus">Disqus</span></a>
</section></article><script>var disqus_shortname="blogwichtounet";(function(){var a=document.createElement("script");a.async=true;a.src="https://"+disqus_shortname+".disqus.com/count.js";(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(a)}());</script>
</div> 
</div>

</div>



<footer>
Contents © 2017 <a href="/cdn-cgi/l/email-protection#d9bbb8a9adb0aaadbcaeb0bab1ad99beb4b8b0b5f7bab6b4">Baptiste Wicht</a> - Powered by <a href="http://getnikola.com" rel="nofollow">Nikola</a> - License:
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="padding-left:5px;border-width:0" src="../../../assets/img/cc.png"></a>
<ul class="footer_inline_ul">
<li>
<a href="release-zapcc-10-fast-cpp-compiler.rst" id="sourcelink">Source</a>
</li>
</ul></footer><script src="/cdn-cgi/scripts/78d64697/cloudflare-static/email-decode.min.js"></script><script src="../../../assets/js/all-nocdn.js"></script>
</body>
</html>
